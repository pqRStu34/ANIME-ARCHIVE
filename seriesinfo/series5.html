<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <title>Gushing over Magical Girls</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <!-- Bootstrap 5 -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.7.2/css/all.min.css" />
    <style>
        body {
            background: #14161a !important;
        }

        .series-card-box {
            position: relative;
            max-width: 400px;
            margin: 0 auto;
            border-radius: 18px;
            overflow: hidden;
            background: #181b20;
            box-shadow: 0 0 16px 2px #101214;
        }

        .series-bg-img {
            width: 100%;
            height: 100%;
            min-height: 420px;
            object-fit: cover;
            display: block;
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            z-index: 0;
        }

        .series-bg-fade {
            position: absolute;
            left: 0;
            right: 0;
            bottom: 0;
            top: 0;
            background: linear-gradient(to bottom,
                    rgba(38, 38, 38, 0.2) 40%,
                    #292929 90%);
            z-index: 1;
        }

        .series-content {
            position: relative;
            z-index: 2;
            padding: 2.2rem 1.2rem 1.2rem 1.2rem;
            color: #00d9ff;
            text-align: center;
        }

        .mb-2 {
            margin-bottom: 0.75rem !important;
        }

        .watch-btn {
            width: 100%;
            margin-bottom: 1rem;
        }

        .badge-genre,
        .badge-year {
            margin-right: 0.3em;
            margin-bottom: 0.2em;
            background: #101214;
            color: #7afff0;
            border: 1px solid #7afff0;
            font-size: 0.85em;
            padding: 0.2em 0.7em;
            border-radius: 0.7em;
            cursor: pointer;
            user-select: none;
            transition: background 0.18s, color 0.18s, border 0.18s;
            text-decoration: none;
            display: inline-block;
        }

        .badge-genre:hover,
        .badge-year:hover {
            background: #209cee;
            color: #fff;
            border-color: #209cee;
            text-decoration: none;
        }

        .desc-card {
            max-width: 400px;
            margin: 1.5rem auto 0 auto;
            border-radius: 14px;
            padding: 1.2rem 1.1rem;
            background: #181b20;
            color: #e3e6ee;
            box-shadow: 0 0 8px #209cee33;
        }

        .is-skeleton {
            background: linear-gradient(90deg,
                    #e0e0e0 25%,
                    #f0f0f0 50%,
                    #e0e0e0 75%);
            background-size: 200% 100%;
            animation: skeleton-loading 1.5s infinite;
            border-radius: 18px;
        }

        @keyframes skeleton-loading {
            0% {
                background-position: 100% 0;
            }

            100% {
                background-position: 0 0;
            }
        }

        .notify-popup {
            position: fixed;
            left: 50%;
            top: 2.5rem;
            transform: translateX(-50%);
            z-index: 9999;
            min-width: 220px;
            max-width: 90vw;
            box-shadow: 0 4px 24px #209cee55;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.3s, top 0.3s;
            background: #209cee;
            color: #fff;
            border-radius: 8px;
            padding: 0.7em 1.2em;
            text-align: center;
        }

        .notify-popup.active {
            opacity: 1;
            pointer-events: auto;
            top: 4.5rem;
        }
    </style>
</head>

<body>
    <div id="notify" class="notify-popup"></div>
    <section class="pt-4 pb-5">
        <div class="container">
            <!-- Skeleton for Series Card -->
            <div id="series-card-skeleton" class="series-card-box is-skeleton"
                style="height: 480px; margin-bottom: 1.5em">
            </div>
            <!-- Skeleton for Description -->
            <div id="desc-card-skeleton" class="desc-card is-skeleton" style="height: 120px"></div>
            <div id="series-card-content" style="display: none">
                <div class="position-relative mx-auto" style="max-width:595px;">
                    <div class="ratio ratio-4x3 position-relative" id="cover-image-container"
                        style="border-radius:24px;overflow:hidden;">
                        <img src="https://cdn.myanimelist.net/images/anime/1525/139345l.jpg"
                            alt="Gushing over Magical Girls" id="series-img" class="w-100 h-100"
                            style="object-fit:cover;min-height:unset;max-width:100%;max-height:100%;border-radius:24px;" />
                    </div>
                </div>
                <div class="d-flex justify-content-center" style="max-width:595px;margin:0 auto;">
                    <button id="watch-now-btn" class="btn btn-lg watch-btn w-100 mt-3"
                        style="background:#48c78e; color:#fff; border:none;max-width:400px;">
                        <span class="me-2"><i class="fas fa-play"></i></span>
                        Watch
                    </button>
                </div>
                <div class="card shadow-sm mb-3"
                    style="max-width:400px;margin:1.2rem auto 0 auto;background:#181b20;border-radius:14px;">
                    <div class="card-body p-3">
                        <h1 class="h4 mb-0 fw-bold text-center" style="color:#e3e6ee;">Gushing over Magical Girls</h1>
                    </div>
                </div>
                <div class="card shadow-sm mb-3"
                    style="max-width:400px;margin:0 auto 0.5rem auto;background:#181b20;border-radius:14px;">
                    <div class="card-body py-2 text-center">
                        <span class="fw-bold me-2" style="color:#66d1ff;">Total Episodes: <span
                                style="color:#ffb70f;">13</span></span><br>
                        <span class="fw-bold" style="color:#66d1ff;">Year: <span
                                style="color:#ffb70f;">2024</span></span>
                    </div>
                </div>
                <div class="card shadow-sm mb-3"
                    style="max-width:400px;margin:0 auto 0.5rem auto;background:#181b20;border-radius:14px;">
                    <div class="card-body py-2 text-center">
                        <a class="badge-genre" data-genre="Magical Girl">Magical Girl</a>
                        <a class="badge-genre" data-genre="Action">Action</a>
                        <a class="badge-genre" data-genre="Comedy">Comedy</a>
                        <a class="badge-genre" data-genre="Psychological">Psychological</a>
                    </div>
                </div>
                <div class="desc-card">
                    <h2 class="h5 mb-2 fw-bold" style="color:#abb1ba;">Description</h2>
                    <div id="desc-text"
                        style="overflow: hidden; display: -webkit-box; -webkit-line-clamp: 3; -webkit-box-orient: vertical;">
                        A team of three magical girls known as Tres Magia protects the town where Utena Hiiragi lives.
                        Like many others, Utena loves these magical girls who valiantly fight in the name of justice.
                        One day, a mysterious black mascot character appears before Utena and grants her the opportunity
                        of a lifetime: a chance to transform into a magical girl. However, the offer is not what it
                        seems, as Utena has been recruited for an evil organization to fight the magical girls she has
                        always admired. Utena is then forced to confront Tres Magia in battle; but instead of feeling
                        remorse, she unexpectedly finds pleasure in inflicting pain on the magical girls. Completely
                        giving in to her desires, Utena embraces her role as a villain, slowly transforming her
                        adoration for magical girls into a new sadistic obsession.
                    </div>
                    <button id="show-more-btn" class="btn btn-link p-0 mt-2 fw-bold"
                        style="color:#ff6685; text-decoration: none; font-weight: bold;">Show more</button>
                </div>
            </div>
        </div>
    </section>
    <script>
        // --- Watch Now ---
        document
            .getElementById("watch-now-btn")
            .addEventListener("click", function () {
                window.location.href = "/video.html?series=series-json/series5";
            });
        function showNotify(msg) {
            const n = document.getElementById("notify");
            n.textContent = msg;
            n.classList.add("active");
            setTimeout(() => n.classList.remove("active"), 2500);
        }
        document.addEventListener("DOMContentLoaded", function () {
            // Hide skeletons, show real content
            document.getElementById("series-card-skeleton").style.display = "none";
            document.getElementById("desc-card-skeleton").style.display = "none";
            document.getElementById("series-card-content").style.display = "";
            // Placeholder image fallback
            const img = document.getElementById("series-img");
            img.onerror = function () {
                img.src = "https://bulma.io/images/placeholders/480x640.png";
            };
            // Genre tag click handler
            document.querySelectorAll(".badge-genre").forEach((tag) => {
                tag.addEventListener("click", function () {
                    const genre = this.getAttribute("data-genre");
                    if (genre) {
                        window.location.href = `/index.html?genre=${encodeURIComponent(
                            genre
                        )}`;
                    }
                });
            });
            // Year tag click handler
            document.querySelectorAll(".badge-year").forEach((tag) => {
                tag.addEventListener("click", function () {
                    const year = this.getAttribute("data-year");
                    if (year) {
                        window.location.href = `/index.html?year=${encodeURIComponent(
                            year
                        )}`;
                    }
                });
            });
            // Show more/less for description
            const descText = document.getElementById('desc-text');
            const showMoreBtn = document.getElementById('show-more-btn');
            let expanded = false;
            showMoreBtn.addEventListener('click', function () {
                expanded = !expanded;
                if (expanded) {
                    descText.style.overflow = 'visible';
                    descText.style.display = 'block';
                    descText.style.webkitLineClamp = 'unset';
                    showMoreBtn.textContent = 'Show less';
                } else {
                    descText.style.overflow = 'hidden';
                    descText.style.display = '-webkit-box';
                    descText.style.webkitLineClamp = '3';
                    showMoreBtn.textContent = 'Show more';
                }
                showMoreBtn.style.textDecoration = 'none';
                showMoreBtn.style.fontWeight = 'bold';
                showMoreBtn.style.color = '#ff6685';
            });
            // Embed YouTube trailer on image click
            const coverContainer = document.getElementById('cover-image-container');
            const coverImg = document.getElementById('series-img');
            coverContainer.addEventListener('click', function () {
                coverContainer.innerHTML = `<div class='ratio ratio-4x3' style='width:100%;height:100%;border-radius:24px;overflow:hidden;'><iframe width="100%" height="100%" src="https://www.youtube.com/embed/0QvWrpY0U2Q?autoplay=1" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen style="border-radius:24px;width:100%;height:100%;"></iframe></div>`;
            });
        });
    </script>
</body>

</html>